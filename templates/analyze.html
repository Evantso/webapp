{% extends 'base.html' %}

{% block head %}
<script type="text/javascript" charset="utf8" src="static/analyze.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/grids-responsive-min.css" />
{% endblock %}


{% block body %}

<div id='message' class='alert'><b>{{message}}</b></div>

<h1>Movie Frame Annotation</h1>
This section of the web page frames from the movie, each one
annotated.

<style>
.float-container {
    padding: 2px;
    border: 2px solid red;
}

.float-movie {
    float: left;
    padding: 2px;
  }

.float-controls {
    float: left;
    padding: 2px;
  }
</style>

<h2 id='firsth2'>Movie Loading...</h2>

<!-- Below:
-- template-id is replaced with id {movie_id}
-- canvas-id  is replaced with id canvas-{movie_id}
-- zoom-id    is replaced with id zoom-{movie_id}
-- After the replacements, a new empty <div> is created with id=template so we could add additional blocks
-->

<div id='template' >
  <table class='float-container'>
    <tr><td class='message'>Loading frame...</td></tr>
    <tr> <!-- First row of analysis table: the movie being tracked-->
      <td> <canvas id="canvas-id" width='320' height='240'> </canvas><br>
        <form action="javascript:void(0)" >
          <label for="zoom">zoom:</label>
          <select id="zoom-id" name="zoom" class='zoom'>
            <option value="100">100%</option>
            <option value="150">150%</option>
            <option value="200">200%</option>
            <option value="300">300%</option>
          </select>
          <input type='button' value='<-' class='frame_prev' disabled/>
          <input type='number' value='1'  class='frame_number' placeholder='frame' size='6' min='0' max='0' disabled/>
          <input type='button' value='->' class='frame_next' disabled/>
        </form>
      </td>
      <td>
        <table class="pure-table pure-table-horizontal pure-table-striped">
          <thead>
            <tr><th>Marker</th><th>Name</th><th>Location (pixels)</th><th>Location (cm)</th><th>Delete</th></tr>
          </thead>
          <tbody class='marker_table_body'>
          </tbody>
        </table>
        <hr>
        <form class='pure-form pure-form-aligned marker_form' action="javascript:void(0)" >
          <fieldset>
            <legend>Add a marker to track a point</legend>

            <div class='pure-control-group'>
              <label for='marker-name'>Name:</label>
              <input class='marker_name_input' type='text'   placeholder='Marker name' size='20' />
              <input class='add_marker_button pure-button pure-button-primary' type='button' value='add marker' disabled/>
            </div>

            <div class='pure-control-group'>
              <label> </label>
              <label class='add_marker_status'></label>
            </div>

            <div class='pure-control-group'>
              <label></label>
              <input class='track_to_end pure-button pure-button-primary' type='button' value='track to end of movie'/>
            </div>
          </fieldset>
        </form>
      </td>
    </tr>
    <tr> <!-- Second row of analysis table: the tracked movie -->
      <td> <video class='movie_player' width='320' height='240' controls playinline> </video><br>
      </td>
      <td>
      <p><span class='download_link'></p>
      </td>
    </tr>
  </table>
</div>

<script>
var movie_id={{movie_id}};
$( document ).ready( function() {
    analyze_movie();
});
</script>
{% endblock %}
